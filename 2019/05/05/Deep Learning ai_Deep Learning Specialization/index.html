<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="baidu-site-verification" content="E1Di33CelZ">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="google-site-verification" content="WsojkhmMcOefku3B2Vxp02NtxlUt_JzBP1fVPrFk3Gw">


  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.4">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.4" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: 'WGLQQAQKBA',
      apiKey: '',
      indexName: 'xiemay',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  



<meta name="baidu-site-verification" content="z0tVDge8Pe">

  
  <meta name="keywords" content="Deep learning,">


<meta name="description" content="C3 Improving Model Performance">
<meta name="keywords" content="Deep learning">
<meta property="og:type" content="article">
<meta property="og:title" content="The Deep Learning Specialization">
<meta property="og:url" content="http://xiemaycherry.github.io/2019/05/05/Deep Learning ai_Deep Learning Specialization/index.html">
<meta property="og:site_name" content="welcome">
<meta property="og:description" content="C3 Improving Model Performance">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-24_21-03-13.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-25_20-42-10.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-25_20-47-46.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-25_20-48-11.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-09-36.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-09-37.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-29-51.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-25.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-26.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-27.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Bayes-Optimal-Error.png">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/e1ef954731399bb4fbf18f2fb99b863a.png">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-28.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-29.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/de2eb0ddc7918f6e9213871e07b8fa56.png">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-39.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-49.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/e1ef954731399bb4fbf18f2fb99b863.png">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-51.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-50.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-52.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-53.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-54.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Analysis-With-Data-Mismatch.png">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-55.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-56.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-57.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-58.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-59.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-26_08-32-60.jpg">
<meta property="og:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/MyBlog/hexo/source/_posts/Deep%20Learning%20ai_Deep%20Learning%20Specialization/End-to-end-Deep-Learning.png">
<meta property="og:updated_time" content="2020-07-25T07:57:33.225Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="The Deep Learning Specialization">
<meta name="twitter:description" content="C3 Improving Model Performance">
<meta name="twitter:image" content="http://xiemaycherry.github.io/2019/05/05/Deep%20Learning%20ai_Deep%20Learning%20Specialization/Xnip2018-06-24_21-03-13.jpg">






  <link rel="canonical" href="http://xiemaycherry.github.io/2019/05/05/Deep Learning ai_Deep Learning Specialization/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>The Deep Learning Specialization | welcome</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

  <!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
<meta name="baidu-site-verification" content="3BmH9zSH5h"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">welcome</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>
        </li>
      
        
        <li class="menu-item menu-item-留言">
          <a href="/guestbook/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-commenting"></i> <br>留言</a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>Schedule</a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>Sitemap</a>
        </li>
      
        
        <li class="menu-item menu-item-baidusitmap">
          <a href="/baidusitmap.xml" rel="section">
            <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>baidusitmap</a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Search</a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://xiemaycherry.github.io/2019/05/05/Deep Learning ai_Deep Learning Specialization/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="XieMay">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="welcome">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">The Deep Learning Specialization</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-05-05T19:41:59+08:00">2019-05-05</time>
            

            
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/深度学习-Deep-Learning/" itemprop="url" rel="index"><span itemprop="name">深度学习(Deep Learning)</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/05/Deep Learning ai_Deep Learning Specialization/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/05/Deep Learning ai_Deep Learning Specialization/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article&#58;</span>
                
                <span title="Symbols count in article">
                10k字
              </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="C3-Improving-Model-Performance"><a href="#C3-Improving-Model-Performance" class="headerlink" title="C3 Improving Model Performance"></a>C3 Improving Model Performance</h1><a id="more"></a>
<h2 id="W1-ML-Strategy-1"><a href="#W1-ML-Strategy-1" class="headerlink" title="W1 ML Strategy(1)"></a>W1 ML Strategy(1)</h2><h3 id="L01-Improving-Model-Performance"><a href="#L01-Improving-Model-Performance" class="headerlink" title="L01 Improving Model Performance"></a>L01 Improving Model Performance</h3><p>需要提高训练结果的表现，表现得更好的措施 Machine Learning Strategy</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-24_21-03-13.jpg" alt=""></p>
<h3 id="L2-Orthogonalization-正交化"><a href="#L2-Orthogonalization-正交化" class="headerlink" title="L2 : Orthogonalization(正交化)"></a>L2 : Orthogonalization(正交化)</h3><p>所谓正交，<strong>就是你的操控效果尽量只影响一个方面</strong>。比如以老式电视机为例，调节图像的大小、左右偏移、上下偏移。而不是一个按钮可以同时调节图像大小和左右偏移，那样会很难操作。</p>
<p>具体到supervised learning，有以下4个假设是正交的？</p>
<ol>
<li>Fit <strong>training set</strong> well in cost function If it doesn’t fit well, the use of a bigger neural network or switching to a better optimization algorithm might help.</li>
<li>Fit <strong>development set</strong> well on cost function If it doesn’t fit well, regularization or using bigger training set might help.</li>
<li>Fit <strong>test set</strong> well on cost function If it doesn’t fit well, the use of a bigger development set might help</li>
<li>Performs well in <strong>real world</strong> If it doesn’t perform well, the development test set is not set correctly or the cost function is not evaluating the right thing.</li>
</ol>
<p>在训练集上表现欠佳，需要切换到好的优化算法</p>
<p>在验证集上表现不好，一组正则化按钮</p>
<p>在测试集表现不好，需要更好的验证集</p>
<p>在用户体验不好，需要改变测试集大小或者成本函数</p>
<h3 id="L3-Single-number-evaluation-metric-单一数字评估指标"><a href="#L3-Single-number-evaluation-metric-单一数字评估指标" class="headerlink" title="L3 Single number evaluation metric(单一数字评估指标)"></a>L3 Single number evaluation metric(单一数字评估指标)</h3><h4 id="classification"><a href="#classification" class="headerlink" title="classification"></a>classification</h4><p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-25_20-42-10.jpg" alt=""></p>
<h4 id="Precesion-（查准率）"><a href="#Precesion-（查准率）" class="headerlink" title="Precesion （查准率）"></a>Precesion （查准率）</h4><p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-25_20-47-46.jpg" alt=""></p>
<h4 id="recall（查全率）"><a href="#recall（查全率）" class="headerlink" title="recall（查全率）"></a>recall（查全率）</h4><p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-25_20-48-11.jpg" alt=""></p>
<script type="math/tex; mode=display">
F 1=\frac{2}{\frac{1}{P}+\frac{1}{R}}=\frac{2 P R}{P+R}</script><h3 id="L4-Satisficing-and-optimizing-metrics-满足和优化指标"><a href="#L4-Satisficing-and-optimizing-metrics-满足和优化指标" class="headerlink" title="L4  Satisficing and optimizing metrics(满足和优化指标)"></a>L4  Satisficing and optimizing metrics(满足和优化指标)</h3><p>如果我们还想要将分类器的运行时间也纳入考虑范围，将其和精确率、召回率组合成一个单值评价指标显然不那么合适。这时，我们可以将某些指标作为<strong>优化指标（Optimizing Matric）</strong>，寻求它们的最优值；而将某些指标作为<strong>满足指标（Satisficing Matric）</strong>，只要在一定阈值以内即可。</p>
<p>在这个例子中，准确率就是一个优化指标，因为我们想要分类器尽可能做到正确分类；而运行时间就是一个满足指标，如果你想要分类器的运行时间不多于某个阈值，那最终选择的分类器就应该是以这个阈值为界里面准确率最高的那个。</p>
<p>如此，accuracy就变成了<strong>optimizing metric</strong>，而running time则是<strong>satisfying metric</strong>，statisfying metric只要达到标准即可，而optimizing metric则追求更好。一般的，选择一项metric作为optimizing metric，其他的则设置为satisfying metric： </p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-09-36.jpg" alt=""></p>
<h3 id="L-5-Train-dev-test-distributions-训练-开发-测试集划分"><a href="#L-5-Train-dev-test-distributions-训练-开发-测试集划分" class="headerlink" title="L 5: Train/dev/test distributions(训练/开发/测试集划分)"></a>L 5: Train/dev/test distributions(训练/开发/测试集划分)</h3><p>开发（<strong>dev</strong>）集也叫做开发集（<strong>development set</strong>），有时称为保留交叉验证集（<strong>hold out cross validation set</strong>）。</p>
<p>如何设置Train/dev/test集，很大程度上影响了机器学习的速度。</p>
<p>Train/dev/test的区别 Workflow in machine learning is that you try a lot of ideas, train up different models on the training set, and then use the dev set to evaluate the different ideas and pick one. And, keep innovating to improve dev set performance until, finally, you have one class that you’re happy with that you then evaluate on your test set.</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-09-37.jpg" alt=""></p>
<p>开发集合和开发集合来自同一分布，如果是不同分布，相当于靶心移动了</p>
<h3 id="L-6-Size-of-dev-and-test-sets-开发集和测试集的大小"><a href="#L-6-Size-of-dev-and-test-sets-开发集和测试集的大小" class="headerlink" title="L 6: Size of dev and test sets(开发集和测试集的大小)"></a>L 6: Size of dev and test sets(开发集和测试集的大小)</h3><p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-29-51.jpg" alt=""></p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-25.jpg" alt=""></p>
<h3 id="L7-When-to-change-dev-test-sets-and-metrics-什么时候该改变开发-测试集和指标"><a href="#L7-When-to-change-dev-test-sets-and-metrics-什么时候该改变开发-测试集和指标" class="headerlink" title="L7 : When to change dev/test sets and metrics(什么时候该改变开发/测试集和指标)"></a>L7 : When to change dev/test sets and metrics(什么时候该改变开发/测试集和指标)</h3><p>如果发现设定目标和实际期望不符，那就调整目标。</p>
<ol>
<li><p>举个例子</p>
<p>A可能把一些色情照片也分类成猫了，因此改变优化指标</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-26.jpg" alt=""></p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-27.jpg" alt=""></p>
</li>
</ol>
<p>我想你处理机器学习问题时，应该把它切分成独立的步骤。一步是弄清楚如何定义一个指标来衡量你想做的事情的表现，然后我们可以分开考虑如何改善系统在这个指标上的表现。你们要把机器学习任务看成两个独立的步骤，用目标这个比喻，第一步就是设定目标。所以要定义你要瞄准的目标，这是完全独立的一步，这是你可以调节的一个旋钮。如何设立目标是一个完全独立的问题，把它看成是一个单独的旋钮，可以调试算法表现的旋钮，如何精确瞄准，如何命中目标，定义指标是第一步。</p>
<p>后第二步要做别的事情，在逼近目标的时候，也许你的学习算法针对某个长这样的成本函数优化，$J=\frac{1}{m} \sum_{i=1}^{m} L\left(\hat{y}^{(i)}, y^{(i)}\right)$你要最小化训练集上的损失。你可以做的其中一件事是，修改这个，为了引入这些权重，也许最后需要修改这个归一化常数，$J=\frac{1}{\sum w^{(i)}} \sum_{i=1}^{m} w^{(i)} L\left(\hat{y}^{(i)}, y^{(i)}\right)$</p>
<p>再次，如何定义J并不重要，关键在于正交化的思路，把设立目标定为第一步，然后瞄准和射击目标是独立的第二步。换种说法，我鼓励你们将定义指标看成一步，然后在定义了指标之后，你才能想如何优化系统来提高这个指标评分。比如改变你神经网络要优化的成本函数J。</p>
<h3 id="L8-Why-human-level-performance-为什么是人的表现？"><a href="#L8-Why-human-level-performance-为什么是人的表现？" class="headerlink" title="L8 : Why human-level performance?(为什么是人的表现？)"></a>L8 : Why human-level performance?(为什么是人的表现？)</h3><p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Bayes-Optimal-Error.png" alt=""></p>
<p>上图展示了随着时间的推进，机器学习系统和人的表现水平的变化。一般的，当机器学习超过人的表现水平后，它的进步速度逐渐变得缓慢，最终性能无法超过某个理论上限，这个上限被称为<strong>贝叶斯最优误差（Bayes Optimal Error）</strong>。</p>
<p>也因此，只要建立的机器学习模型的表现还没达到人类的表现水平时，就可以通过各种手段来提升它。例如采用人工标记过的数据进行训练，通过人工误差分析了解为什么人能够正确识别，或者是进行偏差、方差分析。</p>
<p>当模型的表现超过人类后，这些手段起的作用就微乎其微了。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/e1ef954731399bb4fbf18f2fb99b863a.png" alt=""></p>
<h3 id="L9-Avoidable-bias-可避免偏差"><a href="#L9-Avoidable-bias-可避免偏差" class="headerlink" title="L9 : Avoidable bias(可避免偏差)"></a>L9 : Avoidable bias(可避免偏差)</h3><ol>
<li><p>training error</p>
<p>我们经常使用猫分类器来做例子，比如人类具有近乎完美的准确度，所以人类水平的错误是1%。在这种情况下，如果您的学习算法达到8%的训练错误率和10%的开发错误率，那么你也许想在训练集上得到更好的结果。所以事实上，你的算法在训练集上的表现和人类水平的表现有很大差距的话，说明你的算法对训练集的拟合并不好。所以从减少偏差和方差的工具这个角度看，在这种情况下，我会把重点放在减少偏差上。你需要做的是，比如说训练更大的神经网络，或者跑久一点梯度下降，就试试能不能在训练集上做得更好。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-28.jpg" alt=""></p>
</li>
</ol>
<ol>
<li><p>dev error</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-29.jpg" alt=""></p>
</li>
</ol>
<p><strong>贝叶斯错误率或者对贝叶斯错误率的估计和训练错误率之间的差值称为可避免偏差</strong></p>
<h3 id="L-10-Understanding-human-level-performance-理解人的表现"><a href="#L-10-Understanding-human-level-performance-理解人的表现" class="headerlink" title="L 10: Understanding human-level performance(理解人的表现)"></a>L 10: Understanding human-level performance(理解人的表现)</h3><p>还记得上个视频中，我们用过这个词“人类水平错误率”用来估计贝叶斯误差，那就是理论最低的错误率，任何函数不管是现在还是将来，能够到达的最低值</p>
<h3 id="L11-Surpassing-human-level-performance-超过人的表现"><a href="#L11-Surpassing-human-level-performance-超过人的表现" class="headerlink" title="L11 : Surpassing human- level performance(超过人的表现)"></a>L11 : Surpassing human- level performance(超过人的表现)</h3><p>现在，机器学习有很多问题已经可以大大超越人类水平了。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/de2eb0ddc7918f6e9213871e07b8fa56.png" alt=""></p>
<h3 id="L12-Improving-your-model-performance-改善你的模型的表现"><a href="#L12-Improving-your-model-performance-改善你的模型的表现" class="headerlink" title="L12 : Improving your model performance(改善你的模型的表现)"></a>L12 : Improving your model performance(改善你的模型的表现)</h3><p>你们学过正交化，如何设立开发集和测试集，用人类水平错误率来估计贝叶斯错误率以及如何估计可避免偏差和方差。我们现在把它们全部组合起来写成一套指导方针，如何提高学习算法性能的指导方针。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-39.jpg" alt=""></p>
<p>method</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-49.jpg" alt=""></p>
<h2 id="summary"><a href="#summary" class="headerlink" title="summary"></a>summary</h2><font color="red">这一周的内容主要是改善模型的表现，主要是按照正交化，使得更好的满足 1. 评价指标 2. 数据集的划分 3. 人的表现的重要性 4. 当出现表现不好的时候，如何改善呢，有哪些方法呢？ </font>

<h2 id="W2-ML-Strategy-2"><a href="#W2-ML-Strategy-2" class="headerlink" title="W2 ML Strategy(2)"></a>W2 ML Strategy(2)</h2><h3 id="C-1-Carrying-out-error-analysis-进行误差分析"><a href="#C-1-Carrying-out-error-analysis-进行误差分析" class="headerlink" title="C 1: Carrying out error analysis(进行误差分析)"></a>C 1: Carrying out error analysis(进行误差分析)</h3><h4 id="1-simple-analysis"><a href="#1-simple-analysis" class="headerlink" title="1. simple analysis"></a>1. simple analysis</h4><p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/e1ef954731399bb4fbf18f2fb99b863.png" alt=""></p>
<p>通过观察发现算法分类出错的例子，是把狗分成猫，提高准确率的方法就是如何针对狗的图片优化算法。你可以针对狗，收集更多的狗图，或者设计一些只处理狗的算法功能之类的，为了让你的猫分类器在狗图上做的更好，让算法不再将狗分类成猫。现在考虑的是应该不应该这么去做呢？统计一下dev set里面多少是错误标记是狗的个数，分析出可以改善的算法的上限。</p>
<h4 id="mutiply-analysis"><a href="#mutiply-analysis" class="headerlink" title="mutiply analysis"></a>mutiply analysis</h4><p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-51.jpg" alt=""></p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-50.jpg" alt=""></p>
<h3 id="C2-Cleaning-up-Incorrectly-labeled-data-清除标注错误的数据"><a href="#C2-Cleaning-up-Incorrectly-labeled-data-清除标注错误的数据" class="headerlink" title="C2 : Cleaning up Incorrectly labeled data(清除标注错误的数据)"></a>C2 : Cleaning up Incorrectly labeled data(清除标注错误的数据)</h3><h4 id="incorrct-label"><a href="#incorrct-label" class="headerlink" title="incorrct label"></a>incorrct label</h4><h4 id="traning-set"><a href="#traning-set" class="headerlink" title="traning set"></a>traning set</h4><p>DL algorithms are quite robust to random errors in the traning set so long as your errors or your labeled example to once those errors are not too far from random .</p>
<h4 id="distribution"><a href="#distribution" class="headerlink" title="distribution"></a>distribution</h4><p>首先，我鼓励你不管用什么修正手段，都要同时作用到开发集和测试集上，我们之前讨论过为什么，开发和测试集必须来自相同的分布。开发集确定了你的目标，当你击中目标后，你希望算法能够推广到测试集上，这样你的团队能够更高效的在来自同一分布的开发集和测试集上迭代。如果你打算修正开发集上的部分数据，那么最好也对测试集做同样的修正以确保它们继续来自相同的分布。所以我们雇佣了一个人来仔细检查这些标签，但必须同时检查开发集和测试集。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-52.jpg" alt=""></p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-53.jpg" alt=""></p>
<h4 id="suggestion"><a href="#suggestion" class="headerlink" title="suggestion"></a>suggestion</h4><p>最后我讲几个建议：</p>
<p>首先，深度学习研究人员有时会喜欢这样说：“我只是把数据提供给算法，我训练过了，效果拔群”。这话说出了很多深度学习错误的真相，更多时候，我们把数据喂给算法，然后训练它，并减少人工干预，减少使用人类的见解。但我认为，在构造实际系统时，通常需要更多的人工错误分析，更多的人类见解来架构这些系统，尽管深度学习的研究人员不愿意承认这点。</p>
<p>其次，不知道为什么，我看一些工程师和研究人员不愿意亲自去看这些样本，也许做这些事情很无聊，坐下来看100或几百个样本来统计错误数量，但我经常亲自这么做。当我带领一个机器学习团队时，我想知道它所犯的错误，我会亲自去看看这些数据，尝试和一部分错误作斗争。我想就因为花了这几分钟，或者几个小时去亲自统计数据，真的可以帮你找到需要优先处理的任务，我发现花时间亲自检查数据非常值得，所以我强烈建议你们这样做，如果你在搭建你的机器学习系统的话，然后你想确定应该优先尝试哪些想法，或者哪些方向。</p>
<p>这就是错误分析过程，在下一个视频中，我想分享一下错误分析是如何在启动新的机器学习项目中发挥作用的。</p>
<h3 id="C3-Build-your-first-system-quickly-then-iterate-快速搭建你的第一个系统，并进行迭代"><a href="#C3-Build-your-first-system-quickly-then-iterate-快速搭建你的第一个系统，并进行迭代" class="headerlink" title="C3: Build your first system quickly, then iterate(快速搭建你的第一个系统，并进行迭代)"></a>C3: Build your first system quickly, then iterate(快速搭建你的第一个系统，并进行迭代)</h3><h4 id="1-iteration"><a href="#1-iteration" class="headerlink" title="1. iteration"></a>1. iteration</h4><p>I recommend that you first quickly set up a definition and metrics so this is really you know  deciding where to place your target and you get it wrong you can always move it later we just set up a target somewhere and then I recommend you build an inital machine learning system quickly find the traning set train it and see start to see and understand how well your are doing against your Devon chess setting evaluation metric when you build your initial system you then be able to use bias variance analysis we should talk about earlier as well as error analysis whick we talked about just in last several videos to prioritize the next step in particular if error analysis causes you to realize that a lot of the errors are from the spearker being very far from the mirophone which causes special challenges speech recognitin then that would give you a good reason to focus on techniques to address this it called fast used speech recognition which basically means handling when the speaker is very far from microphone along the value of building this inital  system  it can be a quick  and diry implementation you know do not overthink it but all the value of the inital system is having some learning system having some tranin system allows you lok at bias and variance to do error analysis look at some mistakes to figure out all the different directins you could go in.</p>
<p>我鼓励你们搭建快速而粗糙的实现，然后用它做偏差/方差分析，用它做错误分析，然后用分析结果确定下一步优先要做的方向。</p>
<h3 id="C4-Training-and-testing-on-different-distributions-使用来自不同分布的数据，进行训练和测试"><a href="#C4-Training-and-testing-on-different-distributions-使用来自不同分布的数据，进行训练和测试" class="headerlink" title="C4 : Training and testing on different distributions(使用来自不同分布的数据，进行训练和测试)"></a>C4 : Training and testing on different distributions(使用来自不同分布的数据，进行训练和测试)</h3><p>this is resulted in many teams sometimes taking one of the days you can find and just shoving it into the training set .</p>
<ol>
<li><p>Cat app example </p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/Xnip2018-06-26_08-32-54.jpg" alt=""></p>
<p>假设你在开发一个手机应用，用户会上传他们用手机拍摄的照片，你想识别用户从应用中上传的图片是不是猫。现在你有两个数据来源，一个是你真正关心的数据分布，来自应用上传的数据，比如右边的应用，这些照片一般更业余，取景不太好，有些甚至很模糊，因为它们都是业余用户拍的。另一个数据来源就是你可以用爬虫程序挖掘网页直接下载，就这个样本而言，可以下载很多取景专业、高分辨率、拍摄专业的猫图片。如果你的应用用户数还不多，也许你只收集到10,000张用户上传的照片，但通过爬虫挖掘网页，你可以下载到海量猫图，也许你从互联网上下载了超过20万张猫图。而你真正关心的算法表现是你的最终系统处理来自应用程序的这个图片分布时效果好不好，因为最后你的用户会上传类似右边这些图片，你的分类器必须在这个任务中表现良好。现在你就陷入困境了，因为你有一个相对小的数据集，只有10,000个样本来自那个分布，而你还有一个大得多的数据集来自另一个分布，图片的外观和你真正想要处理的并不一样。但你又不想直接用这10,000张图片，因为这样你的训练集就太小了，使用这20万张图片似乎有帮助。但是，困境在于，这20万张图片并不完全来自你想要的分布，那么你可以怎么做呢？</p>
<p>我们真正关心的是来自手机手机收集的数据，而不是来自网页。方法一，随机分配训练集、验证集、测试集，这样的后果就是花了大量时间在实际不关心的数据分布去优化。</p>
<p>训练集20万张网络，5000手机，验证集和测试集各2500，这样可以保证验证集和测试集更接近实际应用场景，我们试试搭建一个学习系统，让系统在处理手机上传图片分布时效果良好。缺点在于，当然了，现在你的训练集分布和你的开发集、测试集分布并不一样。但事实证明，这样把数据分成训练、开发和测试集，在长期能给你带来更好的系统性能。我们以后会讨论一些特殊的技巧，可以处理 训练集的分布和开发集和测试集分布不一样的情况。</p>
</li>
</ol>
<h2 id="C5-Bias-and-Variance-with-mismatched-data-distributions（数据分布不匹配时，偏差与方差的分析）"><a href="#C5-Bias-and-Variance-with-mismatched-data-distributions（数据分布不匹配时，偏差与方差的分析）" class="headerlink" title="C5: Bias and Variance with mismatched data distributions（数据分布不匹配时，偏差与方差的分析）"></a>C5: Bias and Variance with mismatched data distributions（数据分布不匹配时，偏差与方差的分析）</h2><p>首先算法只看过训练集数据，没看过开发集数据。第二，开发集数据来自不同的分布。很难确认这增加的9%误差率有多少是因为算法没看到开发集中的数据导致的，这么评估呢？到底哪个影响元素更大，</p>
<p>评估方法，训练集的分布挖出，traning-dev set : Same distributation as traning set ,but not used for training.</p>
<p>现在，我们有了<em>训练集</em>错误率、<em>训练-验证集</em>错误率，以及<em>验证集</em>错误率。其中，<em>训练集</em>错误率和<em>训练-验证集</em>错误率的差值反映了方差；而<em>训练-验证集</em>错误率和<em>验证集</em>错误率的差值反映了样本分布不一致的问题，从而说明<strong>模型擅长处理的数据和我们关心的数据来自不同的分布</strong>，我们称之为<strong>数据不匹配（Data Mismatch）</strong>问题。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\Analysis-With-Data-Mismatch.png" alt=""></p>
<h3 id="C6-Addressing-data-mismatch（处理数据不匹配问题）"><a href="#C6-Addressing-data-mismatch（处理数据不匹配问题）" class="headerlink" title="C6: Addressing data mismatch（处理数据不匹配问题）"></a>C6: Addressing data mismatch（处理数据不匹配问题）</h3><p>I<img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\Xnip2018-06-26_08-32-55.jpg" alt=""></p>
<p>Data: Artifical data synthesis</p>
<p>所以，总而言之，如果你认为存在数据不匹配问题，我建议你做错误分析，或者看看训练集，或者看看开发集，试图找出，试图了解这两个数据分布到底有什么不同，然后看看是否有办法收集更多看起来像开发集的数据作训练。</p>
<h3 id="C7-Transfer-learning（迁移学习）"><a href="#C7-Transfer-learning（迁移学习）" class="headerlink" title="C7: Transfer learning（迁移学习）"></a>C7: Transfer learning（迁移学习）</h3><p><strong>迁移学习（Tranfer Learning）</strong>是通过将已训练好的神经网络模型的一部分网络结构应用到另一模型，将一个神经网络从某个任务中学到的知识和经验运用到另一个任务中，以显著提高学习任务的性能。</p>
<p>例如，我们将为猫识别器构建的神经网络迁移应用到放射科诊断中。因为猫识别器的神经网络已经学习到了有关图像的结构和性质等方面的知识，所以只要先删除神经网络中原有的输出层，加入新的输出层并随机初始化权重系数（$W[L]$、$b[L]$），随后用新的训练集进行训练，就完成了以上的迁移学习。</p>
<p>如果新的数据集很小，可能只需要重新训练输出层前的最后一层的权重，即$W[L]$$、b[L]$，并保持其他参数不变；而如果有足够多的数据，可以只保留网络结构，重新训练神经网络中所有层的系数。这时初始权重由之前的模型训练得到，这个过程称为<strong>预训练（Pre-Training）</strong>，之后的权重更新过程称为<strong>微调（Fine-Tuning）</strong>。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\Xnip2018-06-26_08-32-56.jpg" alt=""></p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\Xnip2018-06-26_08-32-57.jpg" alt=""></p>
<p>在下述场合进行迁移学习是有意义的：</p>
<p>两个任务有同样的输入（比如都是图像或者都是音频）；<br>拥有更多数据的任务迁移到数据较少的任务；<br>某一任务的低层次特征（底层神经网络的某些功能）对另一个任务的学习有帮助。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\Xnip2018-06-26_08-32-58.jpg" alt=""></p>
<h3 id="C8-Multi-task-learning-（多任务学习）"><a href="#C8-Multi-task-learning-（多任务学习）" class="headerlink" title="C8; Multi-task learning （多任务学习）"></a>C8; Multi-task learning （多任务学习）</h3><p>For example, autonomous driving example,check cars,stop signs,trfffic lights ,输出也是一个向量，</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\Xnip2018-06-26_08-32-59.jpg" alt=""></p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\Xnip2018-06-26_08-32-60.jpg" alt=""></p>
<h3 id="C9-What-is-end-to-end-deep-learning-什么是端到端的深度学习"><a href="#C9-What-is-end-to-end-deep-learning-什么是端到端的深度学习" class="headerlink" title="C9 :  What is end-to-end deep learning?(什么是端到端的深度学习)"></a>C9 :  What is end-to-end deep learning?(什么是端到端的深度学习)</h3><p>在传统的机器学习分块模型中，每一个模块处理一种输入，然后其输出作为下一个模块的输入，构成一条流水线。而<strong>端到端深度学习（End-to-end Deep Learning）</strong>只用一个单一的神经网络模型来实现所有的功能。它将所有模块混合在一起，只关心输入和输出。</p>
<p><img src="/2019/05/05/Deep Learning ai_Deep Learning Specialization/MyBlog\hexo\source\_posts\Deep Learning ai_Deep Learning Specialization\End-to-end-Deep-Learning.png" alt=""></p>
<h3 id="优点与缺点"><a href="#优点与缺点" class="headerlink" title="优点与缺点"></a>优点与缺点</h3><p>应用端到端学习的优点：</p>
<ul>
<li>只要有足够多的数据，剩下的全部交给一个足够大的神经网络。比起传统的机器学习分块模型，可能更能捕获数据中的任何统计信息，而不需要用人类固有的认知（或者说，成见）来进行分析；</li>
<li>所需手工设计的组件更少，简化设计工作流程；</li>
</ul>
<p>缺点：</p>
<ul>
<li>需要大量的数据；</li>
<li>排除了可能有用的人工设计组件；</li>
</ul>
<p>根据以上分析，决定一个问题是否应用端到端学习的<strong>关键点</strong>是：是否有足够的数据，支持能够直接学习从 x 映射到 y 并且足够复杂的函数？</p>
<h3 id="Whether-to-use-end-to-end-learning-是否要使用端到端的深度学习"><a href="#Whether-to-use-end-to-end-learning-是否要使用端到端的深度学习" class="headerlink" title="Whether to use end-to-end learning?(是否要使用端到端的深度学习?)"></a>Whether to use end-to-end learning?(是否要使用端到端的深度学习?)</h3><p>Pros:</p>
<p>​    let the data speak : x-&gt;y</p>
<p>​    less hand-designing of components needed</p>
<p>Cons:</p>
<p>​    May need large amount of data</p>
<p>​    excludes potentially useful hand-designed components</p>
<p>Key question: Do you hava sufficient data to learn a function of the complexity needed to map x to y?</p>
<p>如果你想使用机器学习或者深度学习来学习某些单独的组件，那么当你应用监督学习时，你应该仔细选择要学习的x到y映射类型，这取决于那些任务你可以收集数据。相比之下，谈论纯端到端深度学习方法是很激动人心的，你输入图像，直接得出方向盘转角，但是就目前能收集到的数据而言，还有我们今天能够用神经网络学习的数据类型而言，这实际上不是最有希望的方法，或者说这个方法并不是团队想出的最好用的方法。而我认为这种纯粹的端到端深度学习方法，其实前景不如这样更复杂的多步方法。因为目前能收集到的数据，还有我们现在训练神经网络的能力是有局限的。</p>
<h1 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a><font color="green">Summary</font></h1><font color="red">学习如何通过一些手段提高模型的表现，首先了解模型的性能的体现，bias、variance、贝叶斯误差。以及如何一步步的改善性能。具体解决了如下问题，1. 数据的划分 2. 人的表现与机器性能的关系、偏差、方差 3. 训练集和验证集的分布问题，当数据样本对于解决问题不足的时候的解决办法，4. 迁移学习 5. 端到端的学习 6. 多任务学习。6. 在性能不好的情况下，可能需要手动的分析误差，对测试集错误样例做统计等等， </font>
      
    </div>

    

    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author: </strong>XieMay</li>
  <li class="post-copyright-link">
    <strong>Post link:</strong>
    <a href="http://xiemaycherry.github.io/2019/05/05/Deep Learning ai_Deep Learning Specialization/" title="The Deep Learning Specialization">http://xiemaycherry.github.io/2019/05/05/Deep Learning ai_Deep Learning Specialization/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</li>
</ul>

      </div>
    
<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

  
</div>
    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Deep-learning/" rel="tag"># Deep learning</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/17/ImprovingDeep learning.ai_Deep Neural NetworksHyperparameter tuning, Regularization and Optimization/" rel="next" title="aiai_">
                <i class="fa fa-chevron-left"></i> aiai_
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/05/12/Deel Learning ai_Convolutional Neural Networks/" rel="prev" title="Networks">
                Networks <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">XieMay</p>
              <p class="site-description motion-element" itemprop="description">期待花开</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">53</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">36</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="http://www.cnblogs.com/shiyiandchuixue/" target="_blank" title="BLOGS"><i class="fa fa-fw fa-globe"></i>BLOGS</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:2323020965@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://github.com/shiyichuixue" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#C3-Improving-Model-Performance"><span class="nav-number">1.</span> <span class="nav-text">C3 Improving Model Performance</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#W1-ML-Strategy-1"><span class="nav-number">1.1.</span> <span class="nav-text">W1 ML Strategy(1)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#L01-Improving-Model-Performance"><span class="nav-number">1.1.1.</span> <span class="nav-text">L01 Improving Model Performance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L2-Orthogonalization-正交化"><span class="nav-number">1.1.2.</span> <span class="nav-text">L2 : Orthogonalization(正交化)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L3-Single-number-evaluation-metric-单一数字评估指标"><span class="nav-number">1.1.3.</span> <span class="nav-text">L3 Single number evaluation metric(单一数字评估指标)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#classification"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">classification</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Precesion-（查准率）"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">Precesion （查准率）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#recall（查全率）"><span class="nav-number">1.1.3.3.</span> <span class="nav-text">recall（查全率）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L4-Satisficing-and-optimizing-metrics-满足和优化指标"><span class="nav-number">1.1.4.</span> <span class="nav-text">L4  Satisficing and optimizing metrics(满足和优化指标)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L-5-Train-dev-test-distributions-训练-开发-测试集划分"><span class="nav-number">1.1.5.</span> <span class="nav-text">L 5: Train/dev/test distributions(训练/开发/测试集划分)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L-6-Size-of-dev-and-test-sets-开发集和测试集的大小"><span class="nav-number">1.1.6.</span> <span class="nav-text">L 6: Size of dev and test sets(开发集和测试集的大小)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L7-When-to-change-dev-test-sets-and-metrics-什么时候该改变开发-测试集和指标"><span class="nav-number">1.1.7.</span> <span class="nav-text">L7 : When to change dev/test sets and metrics(什么时候该改变开发/测试集和指标)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L8-Why-human-level-performance-为什么是人的表现？"><span class="nav-number">1.1.8.</span> <span class="nav-text">L8 : Why human-level performance?(为什么是人的表现？)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L9-Avoidable-bias-可避免偏差"><span class="nav-number">1.1.9.</span> <span class="nav-text">L9 : Avoidable bias(可避免偏差)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L-10-Understanding-human-level-performance-理解人的表现"><span class="nav-number">1.1.10.</span> <span class="nav-text">L 10: Understanding human-level performance(理解人的表现)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L11-Surpassing-human-level-performance-超过人的表现"><span class="nav-number">1.1.11.</span> <span class="nav-text">L11 : Surpassing human- level performance(超过人的表现)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#L12-Improving-your-model-performance-改善你的模型的表现"><span class="nav-number">1.1.12.</span> <span class="nav-text">L12 : Improving your model performance(改善你的模型的表现)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#summary"><span class="nav-number">1.2.</span> <span class="nav-text">summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#W2-ML-Strategy-2"><span class="nav-number">1.3.</span> <span class="nav-text">W2 ML Strategy(2)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#C-1-Carrying-out-error-analysis-进行误差分析"><span class="nav-number">1.3.1.</span> <span class="nav-text">C 1: Carrying out error analysis(进行误差分析)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-simple-analysis"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">1. simple analysis</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mutiply-analysis"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">mutiply analysis</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C2-Cleaning-up-Incorrectly-labeled-data-清除标注错误的数据"><span class="nav-number">1.3.2.</span> <span class="nav-text">C2 : Cleaning up Incorrectly labeled data(清除标注错误的数据)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#incorrct-label"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">incorrct label</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#traning-set"><span class="nav-number">1.3.2.2.</span> <span class="nav-text">traning set</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#distribution"><span class="nav-number">1.3.2.3.</span> <span class="nav-text">distribution</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#suggestion"><span class="nav-number">1.3.2.4.</span> <span class="nav-text">suggestion</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C3-Build-your-first-system-quickly-then-iterate-快速搭建你的第一个系统，并进行迭代"><span class="nav-number">1.3.3.</span> <span class="nav-text">C3: Build your first system quickly, then iterate(快速搭建你的第一个系统，并进行迭代)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-iteration"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">1. iteration</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C4-Training-and-testing-on-different-distributions-使用来自不同分布的数据，进行训练和测试"><span class="nav-number">1.3.4.</span> <span class="nav-text">C4 : Training and testing on different distributions(使用来自不同分布的数据，进行训练和测试)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#C5-Bias-and-Variance-with-mismatched-data-distributions（数据分布不匹配时，偏差与方差的分析）"><span class="nav-number">1.4.</span> <span class="nav-text">C5: Bias and Variance with mismatched data distributions（数据分布不匹配时，偏差与方差的分析）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#C6-Addressing-data-mismatch（处理数据不匹配问题）"><span class="nav-number">1.4.1.</span> <span class="nav-text">C6: Addressing data mismatch（处理数据不匹配问题）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C7-Transfer-learning（迁移学习）"><span class="nav-number">1.4.2.</span> <span class="nav-text">C7: Transfer learning（迁移学习）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C8-Multi-task-learning-（多任务学习）"><span class="nav-number">1.4.3.</span> <span class="nav-text">C8; Multi-task learning （多任务学习）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C9-What-is-end-to-end-deep-learning-什么是端到端的深度学习"><span class="nav-number">1.4.4.</span> <span class="nav-text">C9 :  What is end-to-end deep learning?(什么是端到端的深度学习)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优点与缺点"><span class="nav-number">1.4.5.</span> <span class="nav-text">优点与缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Whether-to-use-end-to-end-learning-是否要使用端到端的深度学习"><span class="nav-number">1.4.6.</span> <span class="nav-text">Whether to use end-to-end learning?(是否要使用端到端的深度学习?)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Summary"><span class="nav-number">2.</span> <span class="nav-text">Summary</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="powered-by">
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">XieMay</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Symbols count total&#58;</span>
    
    <span title="Symbols count total">284k</span>
  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.4</div>



</div>
        








        
      </div>
    </footer>

    

    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


















  
  









  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.4"></script>



  



	





  









  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
    
  
  <script src="[object Object]"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: '1Dfsb4DwGQPCIlbyCKt9egUR-gzGzoHsz',
        appKey: '8OKqJPeMRRQnxx2vaAwIkM8y',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
      flOptions = {};
      
          flOptions.iconStyle = "box";
      
          flOptions.boxForm = "horizontal";
      
          flOptions.position = "middleRight";
      
          flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-float', flOptions);
    
  </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":"wanko","bottom":-30,"mobileShow":false,"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
